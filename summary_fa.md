# خلاصه پروژه Iceberg

## هدف اصلی پروژه

این پروژه یک خط لوله کامل ETL (استخراج، تبدیل، بارگذاری) را پیاده‌سازی می‌کند که داده‌ها را از **Elasticsearch** می‌خواند، با استفاده از **Apache Spark** پردازش می‌کند و در نهایت در یک جدول **Apache Iceberg** ذخیره می‌کند. برای مدیریت نسخه‌ها و تراکنش‌های جداول آیسبرگ، از **Nessie** به عنوان کاتالوگ استفاده می‌شود و فایل‌های نهایی روی **MinIO** (یک سرویس ذخیره‌سازی سازگار با S3) قرار می‌گیرند. تمام این سرویس‌ها با استفاده از **Docker Compose** مدیریت و اجرا می‌شوند.

## اجزای اصلی پروژه

۱. **`docker-compose.yml`**: این فایل مسئول راه‌اندازی تمام سرویس‌های مورد نیاز است:
    -   **`elasticsearch`**: منبع داده اصلی ما.
    -   **`kibana`**: برای مشاهده و مدیریت داده‌های داخل Elasticsearch.
    -   **`nessie`**: کاتالوگ Git-مانند برای مدیریت نسخه‌های مختلف جداول آیسبرگ و تضمین تراکنش‌های اتمی.
    -   **`minio`**: برای ذخیره‌سازی فایل‌های داده جدول (با فرمت Parquet).
    -   **`spark-runner`**: محیطی که اسکریپت Spark ما روی آن اجرا می‌شود.

۲. **`iceberg_project/`**: این پوشه شامل کدهای اصلی خط لوله است:
    -   **`main.py`**: اسکریپت اصلی که تمام مراحل را به ترتیب اجرا می‌کند: بررسی وجود باکت در MinIO، ایجاد نشست Spark، خواندن داده از الاستیک، ایجاد جدول آیسبرگ، نوشتن داده و در نهایت تأیید درستی داده‌ها.
    -   **`config.py`**: تنظیمات مربوط به نشست Spark را برای اتصال به Nessie و MinIO انجام می‌دهد.
    -   **`elastic_reader.py`**: تابعی برای خواندن داده از Elasticsearch را فراهم می‌کند.
    -   **`iceberg_writer.py`**: شامل توابعی برای ایجاد جدول آیسبرگ، نوشتن داده و تأیید داده‌ها است.

## این پروژه چه کاری انجام می‌دهد؟

این پروژه به شما نشان می‌دهد که چگونه می‌توان یک معماری مدرن **Lakehouse** ساخت. به جای ذخیره داده‌ها در یک پایگاه داده گران‌قیمت (Data Warehouse)، آن‌ها را در فایل‌های ارزان (Data Lake) ذخیره می‌کنید و با استفاده از آیسبرگ، همان قابلیت‌های پایگاه داده مانند **تراکنش‌های اتمی (ACID)**، **تکامل اسکما (Schema Evolution)** و **سفر در زمان (Time Travel)** را به آن اضافه می‌کنید.

## نقشه راه (Roadmap)

فایل `roadmap.md` یک راهنمای کامل و گام به گام برای اجرای پروژه است. این فایل توضیح می‌دهد که چگونه سرویس‌ها را راه‌اندازی کنید، داده‌های اولیه را در Elasticsearch وارد کنید، اسکریپت Spark را اجرا کنید و نتایج را در MinIO و Nessie مشاهده نمایید. همچنین به شما یاد می‌دهد که چگونه داده‌های جدید اضافه کنید یا ساختار جدول را در طول زمان تغییر دهید.

به طور خلاصه، این یک پروژه کامل و عملی برای یادگیری آیسبرگ و Nessie در یک محیط واقعی است.
